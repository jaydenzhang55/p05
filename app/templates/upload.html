<!--
Jayden Zhang, Margie Cao, Danny Huang, Kyle Lee
404NotFound
SoftDev
P04
Time spent: tbd
Target Ship Date: 2025-06-06
-->

<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Upload PDF</title>
    <script src="../static/js/main.js"></script>
    {% block javascript %}
        <script>
            var loggedIn = {{loggedIn}};
            var user;
            if (loggedIn){
                user = {{ username | tojson }};
            }
        </script>
    {% endblock %}
</head>

<body class="bg-white text-black font-sans">
    <nav class="flex flex-row justify-between items-center h-20 w-full bg-white border border-b-gray-300 shadow-md">
       <a href="/"><h1 class=" basis-7/24 peer-has-[:focus]:basis-5/24 order-first ml-10 text-blue-700 text-4xl font-bold">Î¾</h1></a>
        <ul id="navItem"
            class="basis-5/12 peer-has-[:focus]:basis-6/12 flex flex-row justify-evenly justify-center-safe h-full text-center items-center text-xl">
            <li
                class="flex flex-row basis-1/2 items-center justify-center peer w-full has-[:focus]:basis-3/4 ease-in-out">
                <form method="POST" action="/search" id='searchBar' class="peer has-[:focus]:w-full">
                    <input class="border border-solid w-full p-2 text-blue-800 rounded-md" type="text" id="search"
                        name="search" placeholder="Search">
                </form>
            </li>
            <li class="basis-1/10 hover:border-b-4 hover:border-b-blue-500 hover:text-blue-700 ml-2">
                <a href="/upload" class="px-4 py-2">Upload</a>
            </li>
            <li class="basis-1/10 hover:border-b-4 hover:border-b-blue-500 hover:text-blue-700 ml-2">
                <a href="/tos" class="px-4 py-2">TOS</a>
            </li>
            <li class="basis-1/10 hover:border-b-4 hover:border-b-blue-500 hover:text-blue-700 ml-2">
                <a href="/saved/{{username}}" class="px-4 py-2" id="sbutton">Saved</a>
            </li>
        </ul>
        <ul class="basis-7/24 flex flex-row-reverse order last h-full text-center items-center text-xl">
            <li class="flex items-center px-4">
                <a href="/login"
                    class="px-4 py-2 rounded-3xl transition bg-blue-600 text-white hover:bg-blue-500 hover:scale-105"
                    id="loginButton">Log In</a>
            </li>
            <li class="flex items-center">
                <a id='lmessage' class="px-4 py-2"></a>
            </li>
        </ul>
    </nav>

    <main class="p-10 max-w-xl mx-auto">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="w-1/2 m-auto my-4 space-y-2">
                    {% for category, message in messages %}
                        <div class="px-4 py-3 rounded-md text-white
                                                            {% if category == 'success' %} bg-green-500
                                                            {% elif category == 'error' %} bg-red-500
                                                            {% elif category == 'warning' %} bg-yellow-500 text-black
                                                            {% else %} bg-blue-500
                                                            {% endif %}
                                                            ">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        <h2 class="text-2xl font-semibold mb-6 text-blue-700">Upload a PDF</h2>
        <form action="/upload" method="POST" enctype="multipart/form-data" class="space-y-6">
            <div>
                <label for="title" class="block text-lg font-medium">Title of PDF</label>
                <input type="text" id="title" name="title" required
                    class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <div>
                <label for="pdf" class="block text-lg font-medium">PDF</label>
                <input type="file" id="pdf" name="pdf" accept="application/pdf" required
                    class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <button type="submit"
                class="w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 transition">
                Upload
            </button>
            <br>
        {% if message %}
            {{ message }}
        {% endif %}
        </form>
    </main>
</body>

</html>